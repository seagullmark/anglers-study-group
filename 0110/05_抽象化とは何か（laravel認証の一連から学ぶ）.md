# 抽象化とは何か

## ― Laravel 認証の一連から学ぶ設計の考え方 ―

このドキュメントでは、今回の一連の実装

- User モデル（FileMaker）
- AuthController
- routes
- Application 設定（bootstrap/app.php）

を通して見えてきた **「抽象化とは何か」** を説明します。

ここでの抽象化は、
**難しい設計用語の話ではありません。**

---

## 1. 抽象化とは何か（結論）

今回の例で言うと、抽象化とは次の状態です。

> **それぞれのファイルが「自分の役割」だけを知っていて、
> 他の実装詳細を知らなくて済む状態**

つまり、

- 知らなくていいことを、知らないでいられる
- 境界を越えて口出ししない

これが抽象化です。

---

## 2. 今回の構成を役割で見る

### User モデル

#### User モデルの役割

- 「このユーザーは誰か」を表現する
- 認証に必要な契約（Contract）を満たす

#### User モデルが知らないこと

- ログイン画面
- ルーティング
- どこにリダイレクトされるか

User は、
「自分が FileMaker に保存されている」こと以上を知りません。

---

### AuthController

#### AuthController の役割

- 入力を受け取る
- 認証を *依頼* する（`Auth::attempt()`）

#### AuthController が知らないこと

- User が FileMaker かどうか
- パスワードがどのカラムにあるか
- Hash の実装方法

AuthController は、
「認証が成功したかどうか」だけを扱います。

---

### routes

#### routes の役割

- どの URL に、誰がアクセスできるかを決める

#### routes が知らないこと

- 認証がどう実装されているか
- User の構造

routes は、
「ログインしているかどうか」という *状態* だけを見ています。

---

### Application（bootstrap/app.php）

#### Application の役割

- 認証状態に応じた全体ルール
- リダイレクト先の一元管理

#### Application が知らないこと

- 各画面の処理内容
- User の保存先

ここでは、
アプリ全体の方針だけを定義します。

---

## 3. 何が抽象化されているのか

この構成では、

- User の保存先（FileMaker）
- 認証の手順
- セッション管理

といった **実装の詳細** が、

- Controller
- routes
- Application 設定

から完全に切り離されています。

> 見えているのは「認証されているかどうか」だけ

これが「認証状態が抽象化されている」という意味です。

---

## 4. 抽象化されていない場合

もし抽象化されていなければ、
Controller はこうなります。

- FileMaker API を直接呼ぶ
- password フィールドを意識する
- Hash 処理を自前で書く
- セッションを手動で管理する

結果として、

- ファイル同士が強く依存する
- 修正が怖くなる
- 再利用できない

という状態になります。

---

## 5. なぜ他言語を学ぶと役に立つのか

Laravel を通して学べるのは、
PHP の書き方ではありません。

> **責務を分けること**
> **境界を守ること**

です。

この考え方は、

- FileMaker のスクリプト設計
- レイアウト依存の切り離し
- 巨大処理の分割

にも、そのまま持ち帰れます。

---

## 6. FileMaker 開発への持ち帰り

FileMaker でも、

- このスクリプトは何を知っていいのか
- どこまでがこのレイアウトの責務か

を意識するだけで、

> 「全部ここでやる」実装から抜け出せる

ようになります。

---

## 7. まとめ

- 抽象化とは「難しい設計技法」ではない
- **役割分担と境界を守ること**
- 知らなくていいことを、知らないでいられる構造

今回の Laravel 認証の一連は、

> 他言語を学ぶことで、
> FileMaker の実装を良くするための
> **設計のヒントを持ち帰れる**

ことを示す、良い例です。
